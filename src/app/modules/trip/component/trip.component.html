<div class="trip-module">
    <div class="search-bar">
        <input [(ngModel)]="departure" placeholder="D'où partez-vous ?">
        <input [(ngModel)]="arrival" placeholder="Où allez-vous ?">
        <button (click)='find()' [disabled]="loading">
            {{ loading ? '...' : 'RECHERCHER' }}
        </button>
    </div>

    <div class="results" *ngIf="results.length > 0">
        <div class="card" *ngFor="let t of results">

            <div class="card-header">
                <div class="company">
                    <img *ngIf="t.companyLogo" [src]="t.companyLogo" class="logo">
                    <span class="name">{{ t.companyName }}</span>
                </div>
                <span class="v-type">{{ t.vehicleType }}</span>
            </div>

            <div class="card-body">
                <div class="info-group">
                    <span class="time">{{ t.departureDateTime | date:'HH:mm' }}</span>
                    <strong class="route">
                        {{ t.departureCityName }} ➔ {{ t.arrivalCityName }}
                    </strong>
                </div>
                <div class="price-group">
                    <span class="price">{{ t.price }}</span>
                    <small>CFA</small>
                </div>
            </div>

            <div class="card-footer">
                <span class="seats" [class.urgent]="t.availableSeats < 5">
                    {{ t.availableSeats }} places dispo
                </span>
            </div>

        </div>
    </div>
</div>